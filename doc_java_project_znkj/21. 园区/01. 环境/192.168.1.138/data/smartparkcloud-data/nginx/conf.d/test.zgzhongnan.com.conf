  upstream znydruoyi-gateway {
       server 192.168.1.138:8080;
   }
   upstream znydruoyi-minio{
       server 192.168.1.138:9000;
   }
   client_max_body_size    100M;
   server {

       listen       80 default;
       server_name  test.zgzhongnan.com;
       access_log /var/log/nginx/test.zgzhongnan.com_access.log nginxlog;
       error_log /var/log/nginx/test.zgzhongnan.com_error.log;
       client_max_body_size 100M;
       charset utf8;

       set_real_ip_from 125.40.67.238;
	   real_ip_header X-Forwarded-For;
	   real_ip_recursive on;

#       location ^~ /file/statics/ {
#           alias   /data/uploadPath/;
#           autoindex off;
#       }


    location /ercode {
        alias  /home/ruoyi/projects/h5;
        index  index.html index.htm;
    }

       location /prod-api/{
           proxy_set_header Host $http_host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header REMOTE-HOST $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
           proxy_pass http://znydruoyi-gateway/;
       }

       location /stage-api/{
           proxy_set_header Host $http_host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header REMOTE-HOST $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#           proxy_pass http://ruoyi-gateway/;
       }

       location /minio/{
           rewrite /minio/(.*) /$1 break;
           proxy_set_header Host $http_host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header REMOTE-HOST $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
           proxy_pass http://znydruoyi-minio/;
       }


       error_page   500 502 503 504  /50x.html;
       location = /50x.html {
           root   html;
       }
       location / {
           root   /home/ruoyi/projects/ruoyi-ui;
            try_files $uri $uri/ /index.html;
           index  index.html index.htm;
       }

       # 新增的转发配置：将/cc路径转发到192.168.1.188的/web路径
       location /cc/ {
           proxy_pass http://192.168.1.188/138web/;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
           proxy_set_header X-Forwarded-Proto $scheme;
       }

   }

   server {

       listen       80;
       server_name  znydbigscreen.zgzhongnan.com;
       access_log /var/log/nginx/znydigscreen_access.log nginxlog;
       error_log /var/log/nginx/znydbigscreen_error.log;
       charset utf-8;
       client_max_body_size 100M;

       location /prod-api/{
           proxy_set_header Host $http_host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header REMOTE-HOST $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
           proxy_pass http://znydruoyi-gateway/;
       }

       error_page   500 502 503 504  /50x.html;
       location = /50x.html {
           root   html;
       }
       location / {
           root   /home/ruoyi/projects/smartparkbigscreen;
            try_files $uri $uri/ /index.html;
           index  index.html index.htm;
       }
   }


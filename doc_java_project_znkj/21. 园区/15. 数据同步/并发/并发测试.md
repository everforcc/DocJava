<span  style="font-family: Simsun,serif; font-size: 17px; ">

### 修改为10个线程

- 数据会重复
- 2000条数据变三千多条

### 加锁

- list修改为for循环
- sn + 表名 + id
- 查询条件，根据更新时间判断是否要更新
    - 如果当前数据时间靠后，则更新
    - 如果考前，则不更新

~~~
for(id:ids){
  lock(sn + 表名 + id){
    result = sql-select
    if(exist){
      update(sn,id,updatetime)
    }else if(no exist){
      insert();
    }
  }
  unlock;
}
~~~

- 4.00
- 4.10
- 4.12

- 4.00
- 4.10
- 4.12

- 4.00
- 4.12
- 4.10

</span>
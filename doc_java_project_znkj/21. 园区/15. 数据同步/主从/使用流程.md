
###

~~~
写一组docker-compose，要求，mysql8.0,一个主数据库，两个从数据库，再写一个sh文件能直接执行，docker-compose版本1.25.0,
每个从库的数据需要同步到主库，主库的数据不需要同步到从库，并且需要一个测试数据库，数据库命名为 oneforall,
数据库测试用户znkj，密码为123456.
~~~

###


~~~

将 docker-compose.yml、master.cnf、slave1.cnf、slave2.cnf 和 init-replication.sh 放在同一目录。

赋予脚本执行权限：
      chmod +x init-replication.sh
      或者 chmod +x init.sh
      
      启动容器：
      docker-compose up -d
      
      执行初始化脚本：
         ./init-replication.sh
   

      docker stop mysql-master mysql-slave1 mysql-slave2
      docker rm -f mysql-master mysql-slave1 mysql-slave2
      docker exec -it mysql-master bash
      docker exec -it mysql-slave1 bash
      docker exec -it mysql-slave2 bash

~~~

### 验证


~~~
mysql -h 127.0.0.1 -P 3306 -u root -prootpass -e "SHOW SLAVE STATUS FOR CHANNEL 'slave1'\G"
mysql -h 127.0.0.1 -P 3306 -u root -prootpass -e "SHOW SLAVE STATUS FOR CHANNEL 'slave2'\G"

~~~

### sql 验证

~~~
USE oneforall;

CREATE TABLE test_table (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);

INSERT INTO test_table (name) VALUES ('Test Data');

~~~

<span  style="font-family: Simsun,serif; font-size: 17px; ">

- 阅读模式

# Readability 算法：网页内容提取的核心技术

## 摘要 (Abstract)

**Readability** 是一套经典的**网页内容提取算法**。它的核心目标是：**从混乱的网页 HTML 中识别并提取文章的主体内容，去除所有无关的“噪音”
**（如广告、导航、侧边栏和评论），从而为用户提供一个干净、统一的阅读视图。它是现代浏览器内置阅读模式（如 Safari Reader、Firefox
Reader View）以及“稍后阅读”服务（如 Pocket）的**技术基石**。

---

## 一、 Readability 的定义与起源

| 属性       | 描述                                            |
|:---------|:----------------------------------------------|
| **最初形态** | 由 Arc90 开发的 **JavaScript Bookmarklet（书签工具）**。 |
| **核心功能** | “一键净化”网页，将内容重构为类似于电子书的纯净视图。                   |
| **技术意义** | 证明了通过**自动化算法**而非预设路径，可以有效分离网页的“文章”和“框架”。      |

---

## 二、 Readability 算法的工作原理

Readability 算法的核心在于**遍历网页的 DOM 树**（Document Object Model，即网页结构），并通过复杂的评分机制来“猜测”哪部分才是文章的正文。

### 1. 预处理与噪音消除

在评分开始前，算法会进行初步清理，直接移除已知为干扰项的元素：

| 操作          | 目标                                     | 示例标签/ID                       |
|:------------|:---------------------------------------|:------------------------------|
| **移除代码与样式** | 清除不必要的逻辑和样式信息。                         | `<script>`, `<style>`         |
| **移除嵌入内容**  | 过滤广告或第三方内容。                            | `<iframe>`, `object`, `embed` |
| **结构平整化**   | 将连续的换行标签 `<br>` 替换为 `<p>`，以提高段落识别的准确性。 | `<br><br>` -> `<p>`           |

### 2. 核心：节点评分机制 (Node Scoring)

算法对 HTML 树中的每个主要容器节点（通常是 `<div>` 或 `<article>`）进行打分，以确定其作为主体的可能性。

#### A. 文本密度分析 (Text Density)

这是评分最重要的依据。

* **原则：** 文章主体区块的**文字字符数**与**非文字元素数**（如链接、图片）的**比率最高**。
* **高分项：** 包含大量连续、纯净文本的区块。
* **低分项：** 包含大量链接 (`<a>`) 或图片的区块（通常是导航栏、图集或侧边栏）。

#### B. 启发式规则 (Heuristics)

根据经验和已知模式进行加减分：

| 规则类型      | 触发条件                                                                             | 评分影响      |
|:----------|:---------------------------------------------------------------------------------|:----------|
| **正向加分**  | 节点的 `ID` 或 `class` 包含 `article`, `post`, `content`, `body`, `main` 等关键词。         | 大幅加分      |
| **负向减分**  | 节点的 `ID` 或 `class` 包含 `ad`, `comment`, `share`, `nav`, `footer`, `sidebar` 等关键词。 | 大幅减分      |
| **子节点分析** | 节点包含过多链接（链接密度过高）。                                                                | 减分（判断为导航） |

### 3. 内容提取与重构

1. **选取最佳节点：** 找到得分最高的节点作为文章的主体容器。
2. **上下文扩展：** 检查最佳节点周围的父节点和兄弟节点，如果它们的评分合理，则将其纳入最终内容，防止遗漏标题或引言。
3. **最终输出：** 将提取出的纯净文本和标题，应用统一的、高可读性的 CSS 样式，呈现给用户。

---

## 三、 Readability 的影响与应用

* **现代浏览器：** 成为 **Safari Reader View**、**Firefox Reader View** 等内置阅读模式的核心技术或灵感来源。
* **稍后阅读服务：** **Pocket**、**Instapaper** 等使用此算法抓取网页内容，以便用户离线、无干扰地阅读。
* **爬虫与数据抓取：** 成为 **智能爬虫** 的关键组件，实现通用、免配置的内容抓取，避免为每个新网站手动编写解析规则。
* **跨语言移植：** 算法逻辑被移植到各种编程语言中，如 Python 的 `newspaper` 库、以及 Java 的 `Jsoup` 辅助实现。

---

## 四、 局限性

Readability 虽强大，但并非万能：

* **对非标准网页的弱点：** 如果网页的 HTML 结构过于混乱或与常规文章模式不符，算法可能抓取失败。
* **动态内容：** 无法有效处理由 JavaScript 运行时动态加载的内容（如某些单页应用/SPA）。
* **多文章页面：** 在包含多篇摘要的列表页（如博客首页）上，难以准确判断用户想阅读的特定文章。

</span>
<span  style="font-family: Simsun,serif; font-size: 17px; ">

[TOC]

### MQTT协议介绍

- HTTP协议
- 互联网的下一个一个时代，万物互联
- 主要应用于物联网
- MQTT是一种基于发布/订阅模式的轻量级消息传输协议，
- 设计用于低带宽、高延迟或不稳定的网络环境，广泛应用于物联网领域

### 版本

- 1999年出现，IBM公司
- 2010开源， v3.1
- 2014，OASIS, v3.1.1
- 2019，

### 应用

- 数据采集和分析
- 远程监控和控制，远程抬杆
- 车牌识别传输

### 优势

- 跨语言
- 建立在TCP/IP之上，所以安全可靠
- 服务质量，Qos
    - 0：消息可能丢失
    - 1：消息不会丢失，但是可能重复
    - 2：消息不会丢失，也不会重复
- 心跳保护
    - 网络问题，定时询问，类似nacos的心跳
- 持久会话：代理保留客户端发送过来的消息，以便于消息订阅端上线立刻获取消息
    - B挂了，又启动，认为还是旧的

### 协议报文

~~~
1. 固定报头
- 一定有
- 所有的数据包都包含


2. 可变报头

3. 有效载荷

~~~

### 工作原理

- 类似mq消息队列
- 类似收音机
- 流程
~~~
消息发布者
MQTT服务器Broker
消息订阅者 1，2，3
~~~

</span>
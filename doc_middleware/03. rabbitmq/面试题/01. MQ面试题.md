<span  style="font-family: Simsun,serif; font-size: 17px; ">

[TOC]

- [RabbitMQ面试题（22道含答案）](https://blog.csdn.net/m0_52184592/article/details/126514406)

### 1. 什么是MQ

- Message Queue
- MQ就是消息队列。是软件和软件进行通信的中间件产品

### 2. MQ的优点

- 异步处理 - 相比于传统的串行、并行方式，提高了系统吞吐量。
- 应用解耦 - 系统间通过消息通信，不用关心其他系统的处理。
- 流量削锋 - 可以通过消息队列长度控制请求量；可以缓解短时间内的高并发请求。
- 日志处理 - 解决大量日志传输。
- 消息通讯 - 消息队列一般都内置了高效的通信机制，因此也可以用在纯的消息通讯。比如实
  现点对点消息队列，或者聊天室等。

### 3. 解耦、异步、削峰是什么？

#### 3.1 解耦

- A 系统发送数据到 BCD 三个系统，通过接口调用发送。如果 E 系统也要这个数据呢？那如果C系统现在不需要了呢？
- A 系统负责人几乎崩溃…,A 系统跟其它各种乱七八糟的系统严重耦合，A 系统产生一条比较关键的数据，很多系统都需要 A 系统将这个数据发送过来。
- 如果使用 MQ，A系统产生一条数据，发送到 MQ 里面去，哪个系统需要数据自己去 MQ 里面消费。
- 如果新系统需要数据，直接从 MQ 里消费即可；如果某个系统不需要这条数据了，就取消对 MQ 消息的消费即可。这样下来，A 系统压根儿不需要去考虑要给谁发送数据，不需要维护这个代码，也不需要考虑人家是否调用成功、失败超时等情况。
- 就是一个系统或者一个模块，调用了多个系统或者模块，互相之间的调用很复杂，维护起来很麻烦。但是其实这个调用是不需要直接同步调用接口的，如果用 MQ 给它异步化解耦。

#### 3.2 异步

- A 系统接收一个请求，需要在自己本地写库，还需要在 BCD 三个系统写库，自己本地写库要 3ms，BCD 三个系统分别写库要 300ms、450ms、200ms。
- 最终请求总延时是 3 + 300 + 450 + 200 = 953ms，接近 1s，用户感觉搞个什么东西，慢死了慢死了。
- 用户通过浏览器发起请求。如果使用 MQ，那么 A 系统连续发送 3 条消息到 MQ 队列中，假如耗时 5ms，A 系统从接受一个请求到返回响应给用户，总时长是 3 + 5 = 8ms。

#### 3.3 削峰

- 减少高峰时期对服务器压力。

### 4. 消息队列有什么缺点

#### 4.1.系统可用性降低

本来系统运行好好的，现在你非要加入个消息队列进去，那消息队列挂了，你的系统不是呵
呵了。因此，系统可用性会降低；

#### 4.2.系统复杂度提高

加入了消息队列，要多考虑很多方面的问题，比如：一致性问题、如何保证消息不被重复消
费、如何保证消息可靠性传输等。因此，需要考虑的东西更多，复杂性增大。

#### 4.3.一致性问题

A 系统处理完了直接返回成功了，人都以为你这个请求就成功了；但是问题是，要是 BCD 三
个系统那里，BD 两个系统写库成功了，结果 C 系统写库失败了，咋整？你这数据就不一致
了。

#### 4.4 结论

所以消息队列实际是一种非常复杂的架构，你引入它有很多好处，但是也得针对它带来的坏处做各种额外的技术方案和架构来规避掉，做好之后，你会发现，妈呀，系统复杂度提升了一个数量级，也许是复杂了 10 倍。但是关键时刻，用还是得用的。

### 5. 你们公司生产环境用的是什么消息中间件？-todo

### 6. Kafka、ActiveMQ、RabbitMQ、RocketMQ 有什么优缺点？-todo

</span> 
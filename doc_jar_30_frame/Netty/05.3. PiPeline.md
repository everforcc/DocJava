<span  style="font-family: Simsun,serif; font-size: 17px; ">

- 监听事件

[TOC]

### 5.7 PiPeline与ChannelPipeline

- 在前面介绍Channel时，我们知道可以在channel中装配ChannelHandler流水线处理器，那一个channel不可能只有一个channelHandler处理器，
    - 肯定是有很多的，既然是很多channelHandler在一个流水线工作，肯定是有顺序的。
- 于是pipeline就出现了，pipeline相当于处理器的容器。初始化channel时，把channelHandler按顺序装在pipeline中，就可以实现按序执行channelHandler了。
- ![](./pic/pipeline.png)
- 在一个Channel中，只有一个ChannelPipeline。该pipeline在Channel被创建的时候创建。
- ChannelPipeline包含了一个ChannelHander形成的列表，且所有ChannelHandler都会注册到ChannelPipeline中。
~~~
//ChannelPipeline实现类DefaultChannelPipeline的构造器方法
protected DefaultChannelPipeline(Channel channel) {
 this.channel = ObjectUtil.checkNotNull(channel, "channel");
 succeededFuture = new SucceededChannelFuture(channel, null);
 voidPromise =  new VoidChannelPromise(channel, true);
 //设置头结点head，尾结点tail
 tail = new TailContext(this);
 head = new HeadContext(this);
 
 head.next = tail;
 tail.prev = head;
}
~~~
- ![](./pic/ChannelHandlerContext-pipeline.png)


</span>
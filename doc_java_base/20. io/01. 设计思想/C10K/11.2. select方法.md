<span  style="font-family: Simsun,serif; font-size: 17px; ">

### 使用select方法

- 使用select方法解决上面阻塞的问题，思路比较简单。
- 在读取文件句柄之前，先查下它的状态，如果ready 了，就进行处理；如果不 ready， 就不进行处理；
- 用一个 fd_set 结构体来告诉内核同时监控多个文件句柄，当其中有文件句柄的状态发生指定变化（例如某句柄由不可用变为可用）或超时，则调用返回。
- 之后，应用可以使用 FD_ISSET 来逐个查看，确定哪个文件句柄的状态发生了变化。
- 这样做，小规模的连接问题不大，但当连接数很多（文件句柄个数很多）的时候，逐个检查状态就很慢了。
- 因此，select 往往存在管理的句柄上限（FD_SETSIZE）。
- 在使用上，因为只有一个字段记录关注和发生事件，所以每次调用之前，要重新初始化fd_set结构体

~~~shell
intselect(intnfds, fd_set *readfds, fd_set *writefds, fd_set *exceptfds,structtimeval *timeout);
~~~

### 实现

- 有连接请求抵达了，再检查处理。

### 缺点

- 句柄上限
- 重复初始化
- 逐个排查所有文件句柄状态
- 效率不高。

</span>
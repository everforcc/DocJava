- 开发一个chrome插件，以下是插件的要求

# 请求修改器 Chrome扩展

这个Chrome扩展允许你修改网络请求的IP地址和URL路径，支持批量修改多个规则，并自动处理跨域问题。

## 功能

- IP地址重定向：将请求从一个IP地址(如127.0.0.1)重定向到另一个IP地址
- 路径重定向：将特定路径的请求重定向到其他服务器，并可选择保留路径部分
  - 例如：将 `http://192.168.0.6/prod-api/system/menu/getRouters` 重定向到 `http://127.0.0.1:8080/prod-api/system/menu/getRouters`
- 跨域(CORS)问题自动处理：自动为重定向到本地服务器的请求添加必要的CORS头
- 支持添加多条规则，并可单独启用/禁用
- 规则持久保存，浏览器重启后仍然有效
- 简单易用的界面

## 安装方法

1. 下载此代码库并解压到本地文件夹
2. 打开Chrome浏览器，输入 `chrome://extensions/`
3. 打开右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择包含此代码的文件夹

## 使用方法

### IP规则
1. 点击Chrome工具栏中的扩展图标打开插件界面
2. 点击"添加IP规则"
3. 在"源IP"字段中输入需要被替换的IP地址(如127.0.0.1)
4. 在"目标IP"字段中输入新的IP地址(如192.168.1.100)
5. 完成后点击"保存所有规则"按钮应用更改

### 路径规则
1. 点击Chrome工具栏中的扩展图标打开插件界面
2. 点击"添加路径规则"
3. 在"源路径"字段中输入需要被替换的路径(如 `192.168.0.6/prod-api`)
   - 无需添加 `http://` 或 `https://` 前缀
   - 格式应为：`域名或IP/路径`
4. 在"目标URL"字段中输入新的URL(如 `127.0.0.1:8080`)
   - 无需添加 `http://` 前缀，系统会自动添加
   - 可以直接输入域名或IP加端口号
5. 选择是否保留原始路径
   - 勾选"保留路径"，系统会保留源路径中除域名/IP外的所有路径
   - 例如：源路径 `192.168.0.6/prod-api`，目标URL `127.0.0.1:8080`
   - 最终请求会被转发到 `http://127.0.0.1:8080/prod-api/xxx`
6. 完成后点击"保存所有规则"按钮应用更改
7. **重要**：首次应用规则或更改规则后，建议重启浏览器以确保所有规则正确生效

### 常见配置示例

#### 示例1：将API请求重定向到本地开发服务器
- 源路径：`192.168.0.6/prod-api`
- 目标URL：`127.0.0.1:8080`
- 保留路径：✓ (勾选)
- 结果：所有对 `http://192.168.0.6/prod-api/xxx` 的请求将被重定向到 `http://127.0.0.1:8080/prod-api/xxx`

#### 示例2：将一个域名的所有请求重定向到另一个服务器
- 源路径：`example.com`
- 目标URL：`localhost:3000`
- 保留路径：✓ (勾选)
- 结果：所有对 `http://example.com/xxx` 的请求将被重定向到 `http://localhost:3000/xxx`

## 跨域(CORS)支持

本插件自动为重定向到本地服务器(127.0.0.1)的请求添加以下CORS头，解决跨域问题：

```
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, PUT, POST, DELETE, HEAD, OPTIONS, PATCH
Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept, Authorization, clientid, token
Access-Control-Allow-Credentials: true
```

这意味着您无需在本地服务器上配置CORS，插件会自动处理。

## 故障排除

如果您遇到以下问题：

1. **重定向不生效**：
   - 确保规则已启用（开关处于打开状态）
   - 重启浏览器后再试
   - 检查源路径格式是否正确，应为 `域名或IP/路径`

2. **跨域(CORS)错误**：
   - 如果仍然看到CORS错误，请重启浏览器
   - 确保错误中提到的URL已包含在您的规则中
   - 检查源服务器是否有特殊的CORS设置

3. **路径格式问题**（如双斜杠 `//` 等）：
   - 编辑您的规则，确保源路径和目标URL格式正确
   - 重新保存并重启浏览器

## 注意事项

- 此扩展通过Chrome的declarativeNetRequest API工作，不会读取或分析页面内容
- 只有HTTP或HTTPS请求会被修改
- 对于IP规则，替换仅适用于URL中可见的IP地址
- 对于路径规则，整个路径会被替换，可以选择是否保留后续子路径
- 请确保输入的源路径和目标URL格式正确，遵循上述指导 
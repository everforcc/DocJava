<span  style="font-family: Simsun,serif; font-size: 17px; ">

[TOC]

- [利用Redis实现限流](https://cloud.tencent.com/developer/article/2216240)

### redis实现接口限流

- redis实现限流的核心思路是利用redis提供的key过期时间作为限流窗口期,key的值记录该窗口期内已经产生的访问资源次数，key本身记录限流的资源范围。

1. 首先规定资源限制范围，一般都是限制对某个接口的调用频率，因此key使用接口方法名即可
2. 第一次访问资源时,key不存在，那么新创建一个key,并将值设置为1,最后设置key的过期时间,表示开启限流窗口期
3. 每一次访问资源，会首先判断当前是否存在限流窗口期，如果存在，将访问次数加一，并判断是否达到最大资源访问次数限制
4. 如果达到了，则抛出异常，告诉用户访问频繁，请稍后再试
5. 如果没达到，则放行请求
6. 在不是第一次访问资源的前提下，如果发现限流窗口期过了，那么重新开启一个

</span>
<span  style="font-family: Simsun,serif; font-size: 17px; ">

[TOC]

- QPS
- 每秒查询率（QPS，Queries-per-second）

### 1. 压测

- 高并发接口必须在测试环境压测，清楚的知道接口支持的QPS，另外根据压测报告给出的优化建议，及时调整线上的配置，代码优化

### 2. C端接口

- 提供给C端的接口，要清楚报关位置，然后根据接口可能预计调用的流量，压测的接口最大支持的QPS
- 决定是否扩容，是否需要持久化限流及兜底逻辑，是否熔断

### 3. 异常处理

- 程序中涉及的异常信息，即使配置错误监控报警

### 4. 日志开关

- 对于业务关键位置，及时打印info级别的业务追踪日志，如果是高并发接口，要做好开关，秒级关闭，打印日志也耗性能

### 5. 异步

- 程序设计方面，高并发接口，尽可能使用缓存，能异步就异步（一般用mq，不要用多线程异步）
- 尽可能采用无锁设计，防止线程lock，CPU冲高，批量写库

### 6. 校验提前

- 接口前置逻辑提前啊，尽早过滤掉不合规逻辑，缩短接口整个调用链路时长，提升接口整体吞吐量

### 7. 无状态设计

- 接口要考虑无状态设计
- 幂等设计（考虑分布式锁唯一key）
- 安全设计（接口方法签名，是否对接第三方房书安服务判断是否是黑用户）

### 8. 第三方服务

- 对接第三方服务做到0信任
- 要有降级，熔断
- 与业务做好兜底逻辑

### 9. 工具类

- 使用google，apache的工具类
- 小众的开源框架在很多高并发场景有bug和性能瓶颈

### 10. 时间复杂度

- 接口的时间复杂度，设计的时候即可能保证o(1)
- 例如调用第三方接口，for循环调用的，考虑放到循环外，多个id批量调用一次
- 时间复杂度从o（n）变为o（1）

</span>
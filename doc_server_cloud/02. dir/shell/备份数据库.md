<span  style="font-family: Simsun,serif; font-size: 17px; ">

[TOC]

### 测试docker备份脚本

~~~shell
docker exec mysql-8.0  /bin/bash -c 'mysqldump -h localhost -P 3306 -u root -pc.c.5664 --databases oneforall' > /mnt/test_`date +%Y%m%d_%H_%M_%S`.sql
~~~

### 测试hkzk

~~~shell
docker exec mysql-8.0  /bin/bash -c 'mysqldump -h 121.89.198.243 -P 3306 -u devmaster -pdevmaster2024 --databases crccdev crccconfigdev' > $FILE
~~~

### 完整备份多库脚本

~~~shell
#!/bin/bash

BACKUP_DIR="/mnt/everforcc/mysql/backup"

# 调整为按月的目录
# 目录 年/月
YEAR=$(date +%Y)
MONTH=$(date +%m)
# 文件名
DATE=$(date +%Y-%m-%d_%H:%M:%S)
# 创建子级目录
mkdir -p ${BACKUP_DIR}/${YEAR}/${MONTH}
FILE="${BACKUP_DIR}/${YEAR}/${MONTH}/${DATE}.sql"
FILELOG="${BACKUP_DIR}/${YEAR}/${MONTH}/${DATE}.log"

echo "Backup start     at $(date)" >> $FILELOG
docker exec mysql-8.0  /bin/bash -c 'mysqldump -h localhost -P 3306 -u root -pc.c.5664 --databases hkzkcrcc nacosconfig oneforall rycloud' > $FILE
echo "Backup completed at $(date)" >> $FILELOG
~~~

</span>
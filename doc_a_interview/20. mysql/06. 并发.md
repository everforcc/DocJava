<span  style="font-family: Simsun,serif; font-size: 17px; ">

[TOC]

## MVCC的理解

对于MVCC的理解，我觉得可以先从数据库的三种并发场景说起：

### 第一种：读读

- 就是线程A与线程B同时在进行读操作，这种情况下不会出现任何并发问题。

### 第二种：读写

- 就是线程A与线程B在同一时刻分别进行读和写操作。
- 这种情况下，可能会对数据库中的数据造成以下问题：

1. 事物隔离性问题，
2. 出现脏读，幻读，不可重复读的问题

### 第三种：写写

- 就是线程A与线程B同时进行写操作
- 这种情况下可能会存在数据更新丢失的问题。
- 而MVCC就是为了解决事务操作中并发安全性问题的无锁并发控制技术全称为Multi-Version Concurrency Control ，也就是多版本并发控制。它是通过数据库记录中的隐式字段，undo日志 ，Read View
  来实现的。
- MVCC主要解决了三个问题

1. 第一个是：通过MVCC 可以解决读写并发阻塞问题从而提升数据并发处理能力
2. 第二个是：MVCC 采用了乐观锁的方式实现，降低了死锁的概率
3. 第三个是：解决了一致性读的问题也就是事务启动时根据某个条件读取到的数据，直到事务结束时，再次执行相同条件，还是读到同一份数据，不会发生变化。

- 而我们在使用MVCC时一般会根据业务场景来选择组合搭配乐观锁或悲观锁。
- 这两个组合中，MVCC用来解决读写冲突，乐观锁或者悲观锁解决写写冲突从而最大程度的提高数据库并发性能。

</span>
<span style="font-family:Simsun,serif; font-size:17px;">

[TOC]

### REDIS缓存和MYSQL数据一致性的解决方案？

- 读取缓存一般没啥问题，但是涉及到数据更新，就容易出现redis和mysql数据不一致问题

~~~
1、如果删除redis缓存，还没来得及写入mysql，此时一个线程俩来读取，缓存为空，则去数据库读取然后写缓存，此缓存中为脏数据
2、如果先写库数据库，在删除缓存前，数据库宕机了，没有删掉缓存，此时数据也不一致了
~~~

#### 两种解决办法1. 延时双删

- 先删缓存，再写数据库，休眠一段时间，再次删除缓存（休眠时间根据业务定）

#### 两种解决办法2. 异步更新缓存

~~~
1、读redis：热数据基本在redis

2、写mysql：增删改都操作mysql

3、更新redis，mysql操作Binlog，来更新redis
    1、将数据全量写入redis
    2、增量：实时更新
~~~

</span>
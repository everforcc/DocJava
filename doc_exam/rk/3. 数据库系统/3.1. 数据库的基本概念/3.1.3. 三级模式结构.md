<span  style="font-family: Simsun,serif; font-size: 17px; ">

[TOC]

- 软考 数据库 三级模式结构
- 没看明白，想给个大概的介绍
- 然后给个详细的图文说明
- 用md格式，完善本文档

### 一、概述（是什么）

三级模式（Three-Schema Architecture）是数据库系统的经典结构，将数据库的描述与使用划分为三个层次，并通过两级映像实现数据独立性。

- 外模式（External Schema，子模式/用户视图）：面向具体用户或应用的定制视图，反映“看到什么、怎么用”。
- 概念模式（Conceptual Schema，逻辑模式/全局视图）：面向全体组织的全局逻辑结构与约束，反映“数据库整体是什么”。
- 内模式（Internal Schema，存储模式/物理视图）：面向存储与访问的物理组织，反映“数据在磁盘上怎么存、如何高效访问”。

两级映像（Two-Level Mappings）：
- 外概映像（External-Conceptual Mapping）：在外模式与概念模式之间，保证逻辑独立性。
- 概内映像（Conceptual-Internal Mapping）：在概念模式与内模式之间，保证物理独立性。

核心目标：屏蔽变化、稳定接口，让“应用与用户视角”和“底层存储实现”相互解耦，降低变更成本。

### 二、结构示意（图文说明）

访问路径（自上而下）：应用/用户 → 外模式 → 外概映像 → 概念模式 → 概内映像 → 内模式 → 存储

```
┌──────────────────────────┐
│        应用/用户程序       │
└───────────┬───────────┘
            │ 使用
     ┌──────▼───────┐
     │    外模式     │  ← 用户/角色定制视图（如教师视图、学生视图）
     └──────┬───────┘
            │ 外概映像（逻辑独立性）
     ┌──────▼───────┐
     │   概念模式    │  ← 全局逻辑结构、约束、关系模式
     └──────┬───────┘
            │ 概内映像（物理独立性）
     ┌──────▼───────┐
     │    内模式     │  ← 物理存储、文件组织、页、索引、聚簇
     └──────┬───────┘
            │ 物理存储
        ┌───▼───┐
        │  磁盘  │
        └───────┘
```

说明：
- 外模式可有多个（每类用户一个或多个视图），概念模式通常只有一个（全局唯一）。
- 内模式描述物理组织，如文件结构、存取路径、索引（如B+树）、分区、页大小、缓冲策略等。
- 外概映像、概内映像由系统中的映像/解释器负责转换与保持一致。

### 三、三层各自关注点

- 外模式（用户视图）
  - 面向对象：终端用户、应用开发者
  - 内容：所需数据子集、字段重命名、聚合/派生列、隐藏敏感列
  - 典型形式：视图、投影、连接结果的逻辑保存
  - 变更影响：尽量不影响应用（通过外概映像缓冲底层变化）

- 概念模式（全局逻辑）
  - 面向对象：DBA、数据建模人员
  - 内容：实体-关系、关系模式、主外键、完整性约束、业务规则
  - 变更影响：通过两级映像屏蔽对外模式与内模式的影响

- 内模式（物理存储）
  - 面向对象：DBA、存储/性能工程师
  - 内容：数据文件、页/段/区、堆/聚簇、索引、分区、压缩、存取方法
  - 变更影响：通过概内映像避免上层逻辑受影响

### 四、两级映像与数据独立性（考点）

- 外概映像 → 保证逻辑独立性：
  - 当概念模式改变（如拆分表、字段重命名、约束调整），通过调整外概映像，可保持外模式/应用不变。

- 概内映像 → 保证物理独立性：
  - 当内模式改变（如更换索引、页大小、分区策略、文件组织），通过调整概内映像，可保持概念模式/逻辑结构不变。

小结配对（高频）：
- 视图所属层：外模式。
- 完整性约束主要在：概念模式（也可在外模式定义局部约束）。
- 存取路径/索引主要在：内模式。
- 外概映像保障：逻辑独立性；概内映像保障：物理独立性。

### 五、示例（学生-课程系统）

- 外模式（两个示例视图）
  - `v_teacher_score`：教师可见 学生姓名、课程、成绩、班级；隐藏身份证等隐私字段。
  - `v_student_transcript`：学生可见 自己的课程、学分、绩点；屏蔽其他学生数据。

- 概念模式（全局）
  - 表：`Student(sid, name, gender, major)`、`Course(cid, cname, credit)`、
    `SC(sid, cid, score)`；主键/外键/唯一性/检查约束等。

- 内模式（物理）
  - 文件与页：行存/列存；页大小；表空间/文件组
  - 索引：`Student(sid)`聚簇索引，`SC(sid,cid)`复合索引，`Course(cname)`二级索引
  - 分区：按学年或学院分区；冷热分层；压缩

变更场景：
- 若将`SC`拆为`Enrollment`与`ScoreDetail`（概念层变化），通过外概映像更新视图定义，教师/学生端可不改。
- 若将`SC(sid,cid)`索引由B+树改为聚簇索引或调整页大小（物理层变化），通过概内映像调整，不改动概念模式。

### 六、意义与优点

- 降低耦合：应用与存储解耦，演进更安全
- 提高共享：多外模式服务不同角色，统一全局概念
- 强化安全：外模式可做列/行级保护与脱敏
- 完整性与一致性：在概念层集中管理约束，减少冗余与异常
- 便于优化：内模式灵活选取文件组织、索引与分区策略

### 七、易混与易考点速记

- 视图=外模式；全局逻辑=概念模式；物理存储=内模式
- 逻辑独立性←外概映像；物理独立性←概内映像
- 完整性主要在概念层；权限/脱敏常在外层；存取路径在内层
- 概念模式通常唯一；外模式可多个；内模式通常唯一（某些DB可多存储结构配置）

### 八、一分钟复习卡

- 问：当磁盘文件组织变化，应用是否需改？
  - 答：无需。概内映像保证物理独立性。
- 问：当逻辑模型字段更名，视图是否可不变？
  - 答：可以。外概映像保证逻辑独立性。
- 问：索引定义属于哪一层？
  - 答：内模式（存取路径/访问方法）。

---

以上内容用于备考软考数据库相关章节，配合教材/真题巩固记忆。

</span>
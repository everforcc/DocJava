# 13.2.2. 数组

## 概述
数组是最基本的数据结构之一，是由相同类型的数据元素组成的有限序列。数组在内存中连续存储，通过索引来访问元素，具有随机访问的特点。

## 数组的基本概念

### 定义
数组是一种线性数据结构，由相同类型的数据元素组成，这些元素在内存中连续存储，通过下标（索引）来访问。

### 特点
1. **同质性**：所有元素具有相同的数据类型
2. **连续性**：元素在内存中连续存储
3. **固定大小**：数组大小在创建时确定
4. **随机访问**：可以通过索引直接访问任意元素
5. **索引从0开始**：第一个元素的索引为0

### 数组的表示
```
数组A[5] = {10, 20, 30, 40, 50}
索引:     0   1   2   3   4
内存地址: 100 104 108 112 116
```

## 数组的存储结构

### 内存布局
数组在内存中按照元素顺序连续存储，每个元素占用相同大小的内存空间。

### 地址计算
对于数组A[n]，元素A[i]的地址计算公式：
```
地址(A[i]) = 基地址 + i × 元素大小
```

### 存储示例
```c
int arr[5] = {10, 20, 30, 40, 50};
// 假设基地址为1000，int类型占4字节
// arr[0] 地址: 1000
// arr[1] 地址: 1004
// arr[2] 地址: 1008
// arr[3] 地址: 1012
// arr[4] 地址: 1016
```

## 数组的基本操作

### 1. 访问操作
- **时间复杂度**：O(1)
- **操作**：通过索引直接访问元素
- **示例**：`value = arr[index]`

### 2. 修改操作
- **时间复杂度**：O(1)
- **操作**：修改指定位置的元素值
- **示例**：`arr[index] = newValue`

### 3. 遍历操作
- **时间复杂度**：O(n)
- **操作**：依次访问所有元素
- **方法**：for循环、while循环、增强for循环

### 4. 查找操作
- **线性查找**：O(n)
- **二分查找**：O(log n)（要求数组已排序）

### 5. 插入操作
- **时间复杂度**：O(n)
- **操作**：在指定位置插入新元素，需要移动后续元素

### 6. 删除操作
- **时间复杂度**：O(n)
- **操作**：删除指定位置的元素，需要移动后续元素

## 数组的类型

### 1. 一维数组
最基本的数组形式，元素按线性顺序排列。

### 2. 多维数组
- **二维数组**：矩阵形式，有行和列两个维度
- **三维数组**：立体形式，有行、列、深度三个维度
- **高维数组**：更多维度的数组

### 3. 动态数组
大小可以在运行时改变的数组，如Java的ArrayList。

## 数组的应用

### 1. 数据存储
- 存储大量同类型数据
- 作为其他数据结构的基础

### 2. 算法实现
- 排序算法的基础
- 搜索算法的基础
- 动态规划的状态存储

### 3. 图像处理
- 存储像素数据
- 图像变换和滤波

### 4. 科学计算
- 存储实验数据
- 数值计算

## 数组的优缺点

### 优点
1. **访问速度快**：O(1)时间复杂度访问任意元素
2. **内存效率高**：连续存储，无额外指针开销
3. **实现简单**：逻辑简单，易于理解和实现
4. **缓存友好**：连续存储有利于CPU缓存

### 缺点
1. **大小固定**：创建后大小不能改变
2. **插入删除困难**：需要移动大量元素
3. **空间浪费**：可能分配过多空间
4. **内存限制**：大数组可能超出可用内存

## 数组的优化策略

### 1. 内存优化
- 合理分配数组大小
- 使用内存池管理数组
- 避免内存碎片

### 2. 访问优化
- 利用局部性原理
- 批量处理数据
- 预取数据到缓存

### 3. 算法优化
- 选择合适的排序算法
- 使用分治策略
- 并行处理

## 数组的常见问题

### 1. 数组越界
访问超出数组范围的索引，可能导致程序崩溃。

### 2. 内存泄漏
动态分配的数组没有正确释放内存。

### 3. 初始化问题
数组元素没有正确初始化。

### 4. 大小限制
数组大小受限于可用内存。

## 数组的实现技巧

### 1. 边界检查
在访问数组元素前检查索引是否合法。

### 2. 动态扩容
当数组空间不足时，创建更大的数组并复制数据。

### 3. 内存对齐
根据数据类型进行内存对齐，提高访问效率。

### 4. 批量操作
尽量使用批量操作而不是逐个处理元素。

## 总结
数组是数据结构的基础，具有简单、高效的特点。掌握数组的基本概念、操作方法和优化策略，对于学习更复杂的数据结构和算法具有重要意义。在实际应用中，需要根据具体需求选择合适的数组类型和实现方式。

<span  style="font-family: Simsun,serif; font-size: 17px; ">

[TOC]

### 索引文件

- 13个节点
- 0-9 直接索引
    - 10 一级间接索引 341^1
        - 11 二级间接索引 341^2
            - 12 三级间接索引 341^3
- 访问磁盘次数
- 直接索引1次
- 一级间接索引2次
- 二级间接索引3次
- 三级间接索引4次
- 索引的最大文件长度

### 索引文件结构

~~~
x-10+1
大地址编号 - 小地址编号 + 1 = 存储单元个数（逻辑页的个数）
x-10+1=341
x=350
350号逻辑页

假设x=13
13-10+1=4
~~~

- 也就是说10本身和一级间接索引的0号是同一个
- ![也就是说10本身和一级间接索引的0号是同一个](../../pic/1.索引节点.png)

### 索引的最大文件长度

- 参考隔壁文件

### 直接索引为什么只需要访问一次磁盘

- **存储关系：** 索引节点（inode）中包含了文件的各种属性信息以及直接索引项，直接索引项记录着文件数据所在的物理盘块地址。在文件系统的布局中，索引节点和它所管理文件的数据块在磁盘上的位置通常是相关联的
  ，在一些文件系统设计里，会将同一文件的索引节点和数据块尽量存储在相邻或相近的磁盘位置。
- **预读机制：** 操作系统为了提高磁盘 I/O 的效率，会采用磁盘预读（read -
  ahead）技术。当操作系统需要读取某个磁盘块的数据时，它会预测后续可能还需要读取相邻磁盘块的数据，因此会一次性读取多个相邻的磁盘块到内存中。当访问采用直接索引的文件时，系统读取索引节点所在的磁盘块，由于索引节点和数据块的关联性，在读取索引节点的同时，很可能也会将索引节点所指向的数据块一并预读到内存中。这样，从磁盘读取索引节点并获取数据块地址，再到读取数据块，在实际的磁盘
  I/O 操作层面，就可以看作是一次磁盘访问。

</span>